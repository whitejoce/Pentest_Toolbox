#!/usr/bin/python
# _*_coding: utf-8 _*_
#Coder:Whitejoce

import os
import time
import re
import requests
import bs4

def getPage(url):
    res = requests.get(url, headers=headers)
    #print(html.text)
    s=res.content
    s.decode('ISO-8859-1')
    bs = bs4.BeautifulSoup(s,"html.parser")
    html = bs.prettify()
    return html

headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:66.0) Gecko/20100101 Firefox/66.0'
}

url = "https://news.sina.com.cn/china"
page = getPage(url)
#print(page)
new_list = re.findall(r'title="(.*?)">',page)
#print(new_list)

if os.path.exists("code/news.txt"):
    os.remove("code/news.txt")

getnews =""
for news in new_list:
        getnews = getnews + news +('\n')
print("[+] 获取新闻(来自:" + url +"):" )
print(getnews)

with open('code/news.txt','w') as f:
       f.write(getnews)
